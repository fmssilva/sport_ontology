# ========================================================================
# SPORTS ONTOLOGY MAPPINGS - H2 COMPATIBLE VERSION
# ========================================================================
# This file maps the H2 relational database to the sports ontology
# Updated to use H2's uppercase table/column naming convention
# 
# H2 Database Schema: Tables and columns are stored in UPPERCASE
# - PERSON table with PERSON_ID, FULL_NAME, NATIONALITY, etc.
# - TEAM table with TEAM_ID, NAME, STADIUM_CAPACITY, etc.
# - PLAYER_ROLE, COACH_ROLE, CONTRACT tables
# ========================================================================

@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix : <http://www.semanticweb.org/sports/ontology#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

# ========================================================================
# 1. BASIC ENTITY MAPPINGS - Core Classes
# ========================================================================

# Person Mapping: Maps PERSON table to :Person class
<urn:r2rml:person-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID, FULL_NAME, NATIONALITY, TIMESTAMPDIFF('YEAR', BIRTH_DATE, CURRENT_DATE) as AGE FROM PERSON"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :Person
    ];
  rr:predicateObjectMap [ 
      rr:predicate :hasName;
      rr:objectMap [ rr:column "FULL_NAME"; rr:datatype xsd:string ]
    ], [
      rr:predicate :hasNationality;
      rr:objectMap [ rr:column "NATIONALITY"; rr:datatype xsd:string ]
    ], [
      rr:predicate :hasAge;
      rr:objectMap [ rr:column "AGE"; rr:datatype xsd:integer ]
    ] .

# Team Mapping: Maps TEAM table to :Team class
<urn:r2rml:team-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT TEAM_ID, NAME, STADIUM_CAPACITY, FOUNDED_YEAR FROM TEAM"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#team/{TEAM_ID}";
      rr:termType rr:IRI;
      rr:class :Team
    ];
  rr:predicateObjectMap [
      rr:predicate :hasName;
      rr:objectMap [ rr:column "NAME"; rr:datatype xsd:string ]
    ], [
      rr:predicate :hasStadiumCapacity;
      rr:objectMap [ rr:column "STADIUM_CAPACITY"; rr:datatype xsd:integer ]
    ], [
      rr:predicate :hasFoundedYear;
      rr:objectMap [ rr:column "FOUNDED_YEAR"; rr:datatype xsd:integer ]
    ] .

# ========================================================================
# 2. SUBCLASS MAPPINGS - Specialized Entity Types
# ========================================================================

# Senior Team Mapping: H2 compatible
<urn:r2rml:senior-team-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT TEAM_ID FROM TEAM WHERE TEAM_TYPE = 'SeniorTeam'"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#team/{TEAM_ID}";
      rr:termType rr:IRI;
      rr:class :SeniorTeam
    ] .

# Youth Team Mapping: H2 compatible
<urn:r2rml:youth-team-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT TEAM_ID FROM TEAM WHERE TEAM_TYPE = 'YouthTeam'"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#team/{TEAM_ID}";
      rr:termType rr:IRI;
      rr:class :YouthTeam
    ] .

# Player Mapping: H2 compatible
<urn:r2rml:player-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID, JERSEY_NUMBER, MARKET_VALUE FROM PLAYER_ROLE WHERE END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :Player
    ];
  rr:predicateObjectMap [
      rr:predicate :hasJerseyNumber;
      rr:objectMap [ rr:column "JERSEY_NUMBER"; rr:datatype xsd:integer ]
    ], [
      rr:predicate :hasMarketValue;
      rr:objectMap [ rr:column "MARKET_VALUE"; rr:datatype xsd:float ]
    ] .

# Coach Mapping: H2 compatible
<urn:r2rml:coach-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID FROM COACH_ROLE WHERE END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :Coach
    ] .

# ========================================================================
# 3. POSITION-SPECIFIC PLAYER MAPPINGS
# ========================================================================

# Goalkeeper Mapping: H2 compatible
<urn:r2rml:goalkeeper-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID FROM PLAYER_ROLE WHERE POSITION = 'Goalkeeper' AND END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :Goalkeeper
    ] .

# Forward Mapping: H2 compatible  
<urn:r2rml:forward-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID FROM PLAYER_ROLE WHERE POSITION = 'Forward' AND END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :Forward
    ] .

# Midfielder Mapping: H2 compatible
<urn:r2rml:midfielder-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID FROM PLAYER_ROLE WHERE POSITION = 'Midfielder' AND END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :Midfielder
    ] .

# ========================================================================
# 4. COACH TYPE MAPPINGS
# ========================================================================

# Head Coach Mapping: H2 compatible
<urn:r2rml:head-coach-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID FROM COACH_ROLE WHERE ROLE_TYPE = 'HeadCoach' AND END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :HeadCoach
    ] .

# ========================================================================
# 5. RELATIONSHIP MAPPINGS - Object Properties
# ========================================================================

# Player-Team Relationship: H2 compatible
<urn:r2rml:plays-for-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID, TEAM_ID FROM PLAYER_ROLE WHERE END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI
    ];
  rr:predicateObjectMap [
      rr:predicate :playsFor;
      rr:objectMap [ rr:template "http://www.semanticweb.org/sports/ontology#team/{TEAM_ID}"; rr:termType rr:IRI ]
    ] .

# Coach-Team Relationship: H2 compatible
<urn:r2rml:coaches-mapping> a rr:TriplesMap;  
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID, TEAM_ID FROM COACH_ROLE WHERE END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI
    ];
  rr:predicateObjectMap [
      rr:predicate :coaches;
      rr:objectMap [ rr:template "http://www.semanticweb.org/sports/ontology#team/{TEAM_ID}"; rr:termType rr:IRI ]
    ] .

# Reverse Team-Player Relationship: H2 compatible
<urn:r2rml:has-player-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT TEAM_ID, PERSON_ID FROM PLAYER_ROLE WHERE END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#team/{TEAM_ID}";
      rr:termType rr:IRI
    ];
  rr:predicateObjectMap [
      rr:predicate :hasPlayer;
      rr:objectMap [ rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}"; rr:termType rr:IRI ]
    ] .

# ========================================================================
# 6. CONTRACT MAPPINGS
# ========================================================================

# Contract Entity Mapping: H2 compatible
<urn:r2rml:contract-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT CONTRACT_ID, SALARY FROM CONTRACT"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#contract/{CONTRACT_ID}";
      rr:termType rr:IRI;
      rr:class :Contract
    ];
  rr:predicateObjectMap [
      rr:predicate :hasSalary;
      rr:objectMap [ rr:column "SALARY"; rr:datatype xsd:float ]
    ] .

# Person-Contract Relationship: H2 compatible
<urn:r2rml:has-contract-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID, CONTRACT_ID FROM CONTRACT WHERE IS_ACTIVE = TRUE"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI
    ];
  rr:predicateObjectMap [
      rr:predicate :hasContract;
      rr:objectMap [ rr:template "http://www.semanticweb.org/sports/ontology#contract/{CONTRACT_ID}"; rr:termType rr:IRI ]
    ] .

# ========================================================================
# 7. ADDITIONAL MAPPINGS - Complete Coverage
# ========================================================================

# Defender Mapping: H2 compatible
<urn:r2rml:defender-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID FROM PLAYER_ROLE WHERE POSITION = 'Defender' AND END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :Defender
    ] .

# Assistant Coach Mapping: H2 compatible
<urn:r2rml:assistant-coach-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT PERSON_ID FROM COACH_ROLE WHERE ROLE_TYPE = 'AssistantCoach' AND END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}";
      rr:termType rr:IRI;
      rr:class :AssistantCoach
    ] .

# Permanent Contract Mapping: H2 compatible
<urn:r2rml:permanent-contract-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT CONTRACT_ID FROM CONTRACT WHERE CONTRACT_TYPE = 'PermanentContract'"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#contract/{CONTRACT_ID}";
      rr:termType rr:IRI;
      rr:class :PermanentContract
    ] .

# Loan Contract Mapping: H2 compatible
<urn:r2rml:loan-contract-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT CONTRACT_ID FROM CONTRACT WHERE CONTRACT_TYPE = 'LoanContract'"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#contract/{CONTRACT_ID}";
      rr:termType rr:IRI;
      rr:class :LoanContract
    ] .

# Reverse Team-Coach Relationship: H2 compatible
<urn:r2rml:has-coach-mapping> a rr:TriplesMap;
  rr:logicalTable [ a rr:R2RMLView;
      rr:sqlQuery "SELECT TEAM_ID, PERSON_ID FROM COACH_ROLE WHERE END_DATE IS NULL"
    ];
  rr:subjectMap [ a rr:TermMap, rr:SubjectMap;
      rr:template "http://www.semanticweb.org/sports/ontology#team/{TEAM_ID}";
      rr:termType rr:IRI
    ];
  rr:predicateObjectMap [
      rr:predicate :hasCoach;
      rr:objectMap [ rr:template "http://www.semanticweb.org/sports/ontology#person/{PERSON_ID}"; rr:termType rr:IRI ]
    ] .